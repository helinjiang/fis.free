
# 代码检查

代码检查使用[Cilint](https://github.com/feix760/cilint)实现

- [Eslint rules规范](#Eslint rules规范)
- [修改rule](#修改rule)
- [Cilint的使用](#Cilint的使用)
- [执行原理](#执行原理)

## Eslint rules规范

- 团队规范继承Eslint Airbnb规范，中文文档: https://github.com/iv-web/javascript
- 团队统一`.eslintrc.js`: https://github.com/iv-web/fis.free/blob/master/conf/.eslintrc.js

## 修改rule

- `.eslintrc.js`, `.cilintrc.js`托管在此项目的[conf](https://github.com/iv-web/fis.free/tree/master/conf)目录下
- `npm start`运行构建时会自动更新配置, 如需更改rule请修改[conf](https://github.com/iv-web/fis.free/tree/master/conf)下的文件，且会对所有项目生效

## Cilint的使用

- 跳过Cilint的检查, 使用`--no-verify`选项跳过检查
```sh
git commit -m 'skip cilint commit' --no-verify
```
- Bug跟踪修复, 请向 https://github.com/feix760/cilint 提issue或者直接联系fishineyuan
- 错误信息快速查找: 
    - eslint: http://eslint.org/docs/rules/
    - eslint-plugin-react: https://github.com/yannickcr/eslint-plugin-react#list-of-supported-rules
    - eslint-plugin-import: https://github.com/benmosher/eslint-plugin-import#rules
    - eslint-plugin-jsx-a11y: https://github.com/evcohen/eslint-plugin-jsx-a11y#supported-rules

## 执行原理

- `npm start`运行构建时[fis3-hook-ivweb](https://github.com/iv-web/fis3-hook-ivweb)调用Cilint的initializer
- Cilint的initializer初始化`.cilintrc.js`, `.eslintrc.js`, `hooks/precommit`
- Git commit时`hooks/precommit`调用Cilint
- Cilint调用Eslint，Git计算新增行的检查信息

